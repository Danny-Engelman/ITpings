<!DOCTYPE html>
<!--suppress CssOptimizeSimilarProperties -->
<html lang="en">
<head>
    <title>ITpings Dashboard</title>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge"> <!-- â€  -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
    <!--
    https://flatuicolors.com/palette/nl
    -->
    <!--maximum height for itpings-table and itpings-chart-->
    <style id="maxheight">
        :root {
            --max-height: 30vh;
            --bordercolor: 'green';
        }
    </style>
    <style id="Table definitions">
        body {
            font-family: Helvetica Neue, Arial, sans-serif;
            font-size: 12px;
            margin: 0 auto;
        }

        table {
            table-layout: fixed;
            width: 100%;
            border-spacing: 0px;
        }

        .chart-wrapper,
        .table-wrapper {
            margin-bottom: 1em;
            border: 1px solid;
            border-color: var(--bordercolor);
            max-height: var(--max-height);
            overflow-x: hidden;
            overflow-y: auto;
        }

        /* ITpings Table Header */
        thead > tr > td {
            background-color: #42b983;
            color: beige;
            font-weight: bold;
        }

        td {
            text-align: center;
            color: darkolivegreen;
            overflow: hidden;
        }

        th, td {
            min-width: 60px;
        }
    </style>
    <style id="ITpings-table column definitions">

        .applicationTitle {
            font-size: 18px;
            width: 100%;
        }

        .github {
            background: orange;
            position: absolute;
            right: 2px;
            top: 0px;
            padding: 2px;
            font-size: 14px;
        }

        .itpings-div-title {
            background: green;
            color: beige;
            font-weight: bolder;
        }

        .ITpings-dashboard > TBODY > TR > TD {
            vertical-align: top;
        }

        [data-column$='pingid'] {
            width: 4em;
        }

        [data-column='eventtype'],
        [data-column='time'],
        [data-column='app_id'],
        [data-column='dev_id'] {
            width: 12em;
        }

        [data-column='eventlabel'] {
            width: 15em;
        }

        /* hide table columns */
        [data-column='Free'],
        [data-column='description'],
        [data-column='timestamp'],
        [data-column='created'],
        [data-column='payload_raw'],
        [data-column='downlink_url'],
        [data-column$='location_source'],
        [data-column$='src'],
        [data-column$='serial'] {
            display: none;
        }

        [data-column='gtw_id'] {
            width: 8em;
        }

        /* collapse columns on smaller screen width */
        @media (max-width: 1024px) {
            [data-column$='appid'],
            [data-column$='appdevid'],
            [data-column$='gtwid'],
            [data-column$='trusted'] {
                width: .1px;
                background: darkgrey;
            }

            [data-column='app_id'] {
                width: 10em;
                zoom: .8;
            }
        }

        @media (min-width: 1024px) {
            [data-column$='appid'],
            [data-column$='devid'],
            [data-column$='appdevid'],
            [data-column$='sensorid'],
            [data-column='channel'],
            [data-column='rssi'],
            [data-column='snr'],
            [data-column='rf_chain'],
            [data-column$='gtwid'],
            [data-column$='trusted'] {
                width: 3em;
            }

        }

        /* overrule default max-height*/
        itpings-table[query='SensorValues'] .table-wrapper {
        }

        /* Hide Columns */
        itpings-table[query='SensorValues'] [data-column$='sensorid'],
        itpings-table[query='SensorValues'] [data-column$='appdevid'],
        itpings-table[query='SensorValues'] [data-column='app_id'],
        itpings-table[query='SensorValues'] [data-column='hardware_serial'] {
            display: none;
        }

        /* Hide TR rows*/
        itpings-table[query='SensorValues'] [data-sensorname^='digital_in_2'],
        itpings-table[query='SensorValues'] [data-sensorname^='digital_in_3'],
        itpings-table[query='SensorValues'] [data-sensorname^='accelerometer'] {
            display: none;
        }

        /* Hide Columns */
        itpings-table[query='PingedGateways'] [data-column='alt'],
        itpings-table[query='PingedGateways'] [data-column='lat'],
        itpings-table[query='PingedGateways'] [data-column='lon'],
        itpings-table[query='PingedGateways'] [data-column='_gwtid'] {
            display: none;
        }

        .itpings-table-error {
            background: lightcoral;
            color: yellow;
        }

        /* overrule max-height setting and show full table for tables with 'noscroll' attribute */
        itpings-table[noscroll] .table-wrapper {
            max-height: initial;
            overflow-x: initial;
            overflow-y: initial;
        }
    </style>
    <style>
        .truncate-text {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
    </style>
    <style id="Color new Pings">
        /*itpings-table TBODY:nth-child(odd) {*/
        /*background-color: beige;*/
        /*}*/

        TBODY.newPing .fadeOutCell {
            animation: fadeOut 60s linear 0s;
        }

        @keyframes fadeOut {
            0% {
                background-color: lightgreen;
                color: black;
            }
            100% {
                background-color: transparent;
                color: darkgrey;
            }
        }

        .unseen_warning {
            background: orange;
        }

    </style>
    <style id="itpings-chart">
        itpings-chart {
            height: var(--max-height);
            max-height: var(--max-height);;
            position: relative;
        }

        itpings-chart .itpings-div-title {
            text-align: left;
            padding-left: 1em;
        }

        [data-column='eventvalue'] {
            max-width: 15em;
            overflow: hidden;
        }

        .chart-wrapper {
            border: 1px solid;
            border-color: var(--bordercolor);
            position: relative;
            height: inherit;
        }

        .chart_interval {
            position: absolute;
            top: 1px;
            right: 1px;
        }

        .chart_interval > div {
            border: 1px solid grey;
            width: 2.1em;
            margin-right: 1px;
            text-align: center;
            position: relative;
            float: left;
            font-size: 9px;
            background: lightgreen;
        }

        .chart_interval > div:hover {
            cursor: pointer;
            background-color: green;
            color: white;
        }

        .chart_interval > div.selectedInterval {
            background-color: green;
            color:white;
        }

        /*Temperature Image*/
        tbody > tr[data-sensorname="temperature_5"] > td[data-column="sensorvalue"]::before {
            /*content: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnPjxwYXRoIHN0eWxlPSJmaWxsOiMwMzAxMDQ7IiBkPSJNMjAsMjEuNTI3VjQuMDA2QzIwLDEuNzkzLDE4LjIwNSwwLDE2LDBjLTIuMjA5LDAtNCwxLjc4Ny00LDQuMDA2djE3LjUyMWMtMS4yMjgsMS4wOTktMiwyLjY5Ni0yLDQuNDczYzAsMy4zMTIsMi42ODcsNiw2LDZjMy4zMTIsMCw2LTIuNjg4LDYtNkMyMiwyNC4yMjMsMjEuMjI5LDIyLjYyNiwyMCwyMS41Mjd6IE0xNiwzMGMtMi4yMDksMC00LTEuNzkxLTQtNGMwLTEuNDgsMC44MDUtMi43NzMsMi0zLjQ2NVY0LjAwNUMxNCwyLjg5NywxNC44OTYsMiwxNiwyYzEuMTExLDAsMiwwLjg5NywyLDIuMDA1djE4LjUzYzEuMTk1LDAuNjkxLDIsMS45ODQsMiwzLjQ2NUMyMCwyOC4yMDksMTguMjA5LDMwLDE2LDMweiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMzAxMDQ7IiBkPSJNMTYuOTg0LDIzLjE2NkMxNi45OTUsMjMuMTExLDE3LDIzLjA1NSwxNywyMi45OTd2LTkuOTk0QzE3LDEyLjQ0OSwxNi41NTcsMTIsMTYsMTJjLTAuNTUzLDAtMSwwLjQ1Ni0xLDEuMDAzdjkuOTk0YzAsMC4wNTgsMC4wMDUsMC4xMTQsMC4wMTQsMC4xNjlDMTMuODQyLDIzLjU3MywxMywyNC42ODgsMTMsMjZjMCwxLjY1NywxLjM0MywzLDMsM3MzLTEuMzQzLDMtM0MxOSwyNC42ODgsMTguMTU4LDIzLjU3MywxNi45ODQsMjMuMTY2eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);*/
        }

        /*RSSI Signal Strength Image*/
        tbody > tr > td[data-column="rssi"]::before {
            /*content: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDM5Mi42MzQgMzkyLjYzNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzkyLjYzNCAzOTIuNjM0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggZD0iTTM3Mi4yMDIsMGgtNTUuNzk3Yy01LjMzNywwLTkuNjYsNC4zMTktOS42Niw5LjY1NXY4Ny40NTZjMC01LjMzNS00LjMyMi05LjY1OC05LjY2NC05LjY1OGgtNTUuNzk3ICAgYy01LjMzNiwwLTkuNjY5LDQuMzIzLTkuNjY5LDkuNjU4djUzLjk2Yy0xLjc2Mi0yLjEzNS00LjQwNS0zLjUyNS03LjM5My0zLjUyNWgtNTUuODAzYy01LjMzLDAtOS42NTYsNC4zMjYtOS42NTYsOS42NjF2NjguNjc3ICAgYzAtNS4zMy00LjMyNi05LjY1My05LjY2Ny05LjY1M0g5My4zYy01LjMzMywwLTkuNjU4LDQuMzE3LTkuNjU4LDkuNjUzdjUzLjk2NGMtMS43NzEtMi4xMzQtNC40MS0zLjUyMy03LjQwNS0zLjUyM0gyMC40NCAgIGMtNS4zMzMsMC05LjY2NSw0LjMxNy05LjY2NSw5LjY1OHY5Ni45OTFjMCw1LjMzMSw0LjMyNiw5LjY2LDkuNjY1LDkuNjZsMzUxLjc2MS0wLjIwNWM1LjMyOCwwLDkuNjU3LTQuMzIzLDkuNjU3LTkuNjY0VjkuNjU1ICAgQzM4MS44NTMsNC4zMjYsMzc3LjUzLDAsMzcyLjIwMiwweiBNNzIuOTIxLDM3Ni4xMkgyNi43Nzl2LTgwLjQ3OWg0Ni4xNDNWMzc2LjEyeiBNMTQ1LjE4OCwzNzYuMTJIOTkuMDVWMjM2LjA4M2g0Ni4xMzhWMzc2LjEyeiAgICBNMjIwLjQzMSwzNzYuMTJoLTQ2LjE0VjE2MS41aDQ2LjE0VjM3Ni4xMnogTTI5NC4xNjIsMzc2LjEyaC00Ni4xNDFWMTAzLjAxOWg0Ni4xNDFWMzc2LjEyeiBNMzY2LjE5OCwzNzYuMTJoLTQ2LjEzMlYxNi42MzggICBoNDYuMTMyVjM3Ni4xMnoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K)*/
        }
    </style>
    <style title="DynamicDeviceColors">
        /* This style definition will be filled by JavaScript */
    </style>
    <style title="Loading_dots">
        .loading {
            font-size: 200%;
            text-align: left;
        }

        /* 3 pulsating ellipses after Loading text */
        .loading:after {
            overflow: hidden;
            display: inline-block;
            vertical-align: bottom;
            -webkit-animation: ellipsis steps(4, end) 1100ms infinite;
            animation: ellipsis steps(4, end) 1100ms infinite;
            content: "\2026"; /* ascii code for the ellipsis character */
            width: 0px;
        }

        @keyframes ellipsis {
            to {
                width: 1.25em;
            }
        }

        @-webkit-keyframes ellipsis {
            to {
                width: 1.25em;
            }
        }
    </style>
    <!-- run script after CSS declarations, because script references above/existing styles -->
    <script language="JavaScript" src="ITpings_dashboard.js"></script>
</head>
<body>
<table class="ITpings-dashboard">
    <thead>
    <tr>
        <th colspan="3">
            <div class="applicationTitle">ITpings Dashboard
                <!--<button id="dropDatabase">Drop Database</button>-->
                <!--<button id="createDatabase">Create Database</button>-->
                <div class="github"><a href="https://github.com/Danny-Engelman/ITpings">Available On GitHub</a></div>
            </div>
            <script>
                let key = 'YOUR_PRIVATE_KEY';// but you better not use this on a public website!
                let __addClick = (selector, action) => {
                    let element = document.querySelector(selector);
                    if (element) {
                        element.addEventListener('click', _ => {
                            if (confirm('Really??')) document.location = './ITpings_connector.php?action=' + action + '&key=' + key;
                        });
                    }
                };
                __addClick('#dropDatabase', 'drop');
                __addClick('#createDatabase', 'create');
            </script>
        </th>
    </tr>
    </thead>
    <tbody>
    <tr><!-- Top row -->
        <td>
            <itpings-table query="DBInfo" title="ITpings Database Info" noscroll></itpings-table>
        </td>
        <td colspan="2">
            <!--<itpings-table query="SensorValues" title="SensorValues"></itpings-table>-->
        </td>
        <td>
            <itpings-chart sensorname="temperature_5" interval="H2"></itpings-chart>
        </td>
    </tr>
    <tr><!-- Middle row -->
        <td>
            <!--<itpings-table query="applications" title="All Applications"></itpings-table>-->
            <itpings-table query="Devices" title="All Devices"></itpings-table>
        </td>
        <td colspan="2">
            <itpings-table query="PingedGateways" title="Pinged Gateways"></itpings-table>
        </td>
        <td>
            <!--<itpings-chart chartid="luminosity" sensorname="luminosity_6" interval="H6"></itpings-chart>-->
        </td>
    </tr>
    <tr><!-- Bottom row -->
        <td colspan="2">
            <itpings-table query="Events" title="ITpings Events"></itpings-table>
        </td>
        <td colspan="2">
            <!--<itpings-table query="Gateways" title="All Gateways"></itpings-table>-->
        </td>
    </tr>

    </tbody>
</table>
</body>
</html>